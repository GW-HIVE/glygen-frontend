<html>

<head>
    
<title>color converter</title>
    
<style>
div {
  width: 50%;
  text-align: center;
} 
</style>

<script>

function interpolateColor(startColor, endColor, a) {
    // find modified color by interpolation to value between  startColor and endColor
    // this method is general and can be used in any context
    // startColor and endColor are 6-character hexadecimal color representation strings like "FFC040"
    // a is the "interpolation factor" used in the calculation

    useHash = false;
    if (startColor.indexOf("#") == 0) {
        // don't process the leading "#" character
        startColor = startColor.substring(1,7);
        useHash = true;
    }
    if (endColor.indexOf("#") == 0) {
        // don't process the leading "#" character
        endColor = endColor.substring(1,7);
        useHash = true;
    }
    
    // Calculate "modified" color
    var newColor = "";

    for (var i=0; i<3; i++) { // for each rgb component
        // retrieve decimal representations of each color component
        var startComp = parseInt("0x" + startColor.substring(i*2, 2+i*2));
        var endComp = parseInt("0x" + endColor.substring(i*2, 2+i*2));
        // calculate modified version of each component and convert to hexadecimal
        var v = Math.round(endComp * a + startComp * (1 - a)).toString(16);
        // v is a string that must have 2 characters
        if (v.length == 1) v = "0" + v; 
        newColor += v;
    }
    if (useHash) newColor = "#" + newColor;
    
    return(newColor.toUpperCase());
}
    

  
function calculateColors() {
    // context (web page) specific code, just to fetch parameters from the page and show the results

    var inputColor = document.getElementById("input").value;    
    var targetColor = document.getElementById("target").value;    
    document.body.style.backgroundColor = targetColor;
    
    inputDisplay = document.getElementById("inputDisplay");
    inputDisplay.style.backgroundColor = inputColor;
    inputDisplay.innerHTML = "Starting color: '" + inputColor + "'";
    
    var outputDisplay = document.getElementById("outputDisplay");
    var factor = [0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 0.95, 0.99];
    var result = "";
    var htmlText = "";

    for (var i=0; i<11; i++) { // lighten
        // use a single command to calculate new color
        result = interpolateColor(inputColor, targetColor, factor[i]);
        htmlText += "<p style='background-color:" + result + "'>modified color: '" + result + "' calculated using <i>a</i> = " + factor[i] + "</p>";
    }
 
    
    outputDisplay.innerHTML = htmlText;
}

</script>
  
</head>
    
<body>
  
<center>

<p>
Starting RGB value (hexadecimal): <input type="text" id="input" onchange="calculateColors();"><br>
Target RGB value (hexadecimal): <input type="text" id="target" onchange="calculateColors();" value="FFFFFF">
</p>    
 
New color component values (<i>v</i>) are computed from:<br>
The original color component values (<i>c</i>) and the target color component values (<i>t</i>) by simple interpolation:<br>
<i>v</i> = <i>t</i><i>a</i> + <i>c</i>(1-<i>a</i>) <br>
This equation has natural limits 0 &le; <i>v</i> &le; 255<br>
when 0 &le; <i>a</i> &le; 1, 0 &le; <i>t</i> &le; 255, and 0 &le; <i>c</i> &le; 255<br>
This retains the same hue, but changes the "apparent" transparency when (as here) the background is set to the target color
    
<div id="inputDisplay">
   input color shown here  
</div>

<div id="outputDisplay">
   output color shown here  
</div>
    
</center>
</body>
