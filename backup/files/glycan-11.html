<html>

<head>
    
<script>
    var nodeArray = new Array();
    var bondArray = new Array();
    var textArray = new Array();
       
    window.onload=function() {
        // get the svg content - in THIS file, the svg object has id "muSVG"
        var svgObj = document.getElementById("mySVG");
        // Here, svgObj contains an svg document, assigned to the variable svgDoc  
        var svgDoc = svgObj.contentDocument;
        // set the extFlag value to "1" so that clicking on svg nodes will not ivoke methods
        //     that are instantiated inside the svg file
        svgDoc.getElementById("extFlag").setAttribute("value", "1");    
        
        // generate a temporary array (tempArray) of sugar nodes that are specified in the svg file
        //   These are all of class "sugar"
        var tempArray = svgDoc.getElementsByClassName("sugar");
        // for each tempArray element, addEventListeners, specifying a function that sets a variable (nis)
        //     and calls a method that is defined in the methods section below
        //     Additional event listeners can be instantiated here as well
        for (var i = 0; i < tempArray.length; i++) {
            // set up the nodeArray (global scope, for use later)
            // fetch the nodeIndex of each node and use this as the index for nodeArray
            var nis = tempArray[i].getAttribute("nodeIndex");
            nodeArray[nis] = tempArray[i];
            tempArray[i].addEventListener("click",
                    function() {
                       var ni = this.getAttribute("nodeIndex");
                        extClick(ni);
                    },
                    false);
            tempArray[i].addEventListener("mouseover",
                    function() {
                       var ni = this.getAttribute("nodeIndex");
                       extOver(ni);
                    },
                    false);
            tempArray[i].addEventListener("mouseleave",
                    function() {
                       var ni = this.getAttribute("nodeIndex");
                       extLeave(ni);
                    },
                    false);
            tempArray[i].addEventListener("dblclick",
                    function() {
                       var ni = this.getAttribute("nodeIndex");
                       dblClick(ni);
                    },
                    false); 
        }
        
        // set up bondArray (global scope, for use later)
        tempArray = svgDoc.getElementsByClassName("bond");
        for (var i = 0; i < tempArray.length; i++) {
            // fetch the nodeIndex of each bond and use this as the index for bondArray
            var nis = tempArray[i].getAttribute("nodeIndex");
            bondArray[nis] = tempArray[i];
        }
        
        // set up textArray (global scope, for use later)
        tempArray = svgDoc.getElementsByClassName("sText");
        for (var i = 0; i < tempArray.length; i++) {
            // fetch the nodeIndex of each text and use this as the index for textArray
            var nis = tempArray[i].getAttribute("nodeIndex");
            textArray[nis] = tempArray[i];
        }
    }
    
    
    // Methods Section follows - modify these to do what you want when mouse events occur on svg nodes
    //    These methods are invoked by the Event Listeners instantiated above
    function extClick(nid) {
        // modify this method to do something when node associated with nid is clicked
        document.getElementById("infoDiv").innerHTML = "You <b>clicked</b> node " + nid + 
            "<br>information provided by the <b>extClick() method</b> implemented within this html document";
        nodeArray[nid].style.opacity = 0;
        bondArray[nid].style.stroke = "red";
        textArray[nid].style.stroke = "green";
    }
    function extOver(nid) {
        // modify this method to do something when node associated with nid is moused over
        document.getElementById("infoDiv").innerHTML = "You <b>moved the mouse over</b> node " + nid + 
            "<br>information provided by the <b>extOver() method</b> implemented within this html document";
    }

    function extLeave(nid) {
        // modify this method to do something when the mouse is moved out of the node associated with nid
        document.getElementById("infoDiv").innerHTML = "You <b>moved the mouse out</b> of node " + nid + 
           "<br>information provided by the <b>extLeave() method</b> implemented within this html document";
    }
 
    function dblClick(nid) {
        // modify this method to do something when node associated with nid is double-clicked
        document.getElementById("infoDiv").innerHTML = "You <b>double clicked</b> node " + nid + 
           "<br>information provided by the <b>dblClick() method</b> implemented within this html document";
        nodeArray[nid].style.opacity = 1;
        bondArray[nid].style.stroke = "black";
        textArray[nid].style.stroke = "black";
    }
    </script>
    
</head>
<body>
    
<center>
    
<h2>HTML implementation of SVG methods</h2>

<object type="image/svg+xml" id="mySVG" width="860" height="400" style="background: #EEFFEE" data="svg/glycan-11.svg">
  Your browser does not support SVG
</object>

<br>
<div id="infoDiv">
    Information goes here ....
</div>
</center>    
<table>
    
</table>
    
</body>
</html>